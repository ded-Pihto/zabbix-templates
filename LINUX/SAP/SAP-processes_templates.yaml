zabbix_export:
  version: '6.4'
  template_groups:
    - uuid: 545fb605755e482ca08244d432a4d4d0
      name: SAP
  templates:
    - uuid: e32fe0b131a640b187399ff5b47153d0
      template: 'SAP APP monitoring'
      name: 'SAP APP monitoring'
      groups:
        - name: SAP
      discovery_rules:
        - uuid: c401ef982f3147c98a23ebb81cd2ebb8
          name: 'Discovery SAP services'
          key: 'custom.sap.control[discovery]'
          delay: 1h
          lifetime: 1d
          item_prototypes:
            - uuid: e93f09d4ca4246b9936b706810b6b8b2
              name: '[ {#ICOD}-{#INAME} ] {#SDESC}'
              key: 'custom.sap.control[{#SDESC},{#ICOD},{#INAME}]'
              valuemap:
                name: Status
              tags:
                - tag: application
                  value: SAP
              trigger_prototypes:
                - uuid: 7fdc6b9ddbc748068789f7a98621fb3f
                  expression: 'last(/SAP APP monitoring/custom.sap.control[{#SDESC},{#ICOD},{#INAME}])=0'
                  name: '[ {#ICOD}-{#INAME} ] {#SDESC} not GREEN'
                  tags:
                    - tag: application
                      value: SAP
          preprocessing:
            - type: JSONPATH
              parameters:
                - $.data
      tags:
        - tag: application
          value: SAP
      valuemaps:
        - uuid: 4a99f85bd0ec4c718a75890da28eeabd
          name: Status
          mappings:
            - value: '0'
              newvalue: Down
            - value: '1'
              newvalue: Up
